<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, user-scalable=yes">
    <title>2026 Winter Master</title>
    <style>
        :root {
            --bg: #fdfdfd;
            --math-br: #e3f2fd; --math-ryu: #e0f2f1;
            --math-dw: #f3e5f5; --math-ws: #e8eaf6;
            --phys-sol: #fff3e0; --phys-br: #ffebee;
            --algo-hc: #e8f5e9; --algo-os: #f1f8e9;
            --holiday: #fffde7;
            --now-line: #ff4d4d;
        }
        body { margin: 0; font-family: 'Pretendard', sans-serif; background: var(--bg); color: #333; overflow-x: auto; }
        header { background: #222; color: white; padding: 15px; text-align: center; font-weight: bold; width: 100%; box-sizing: border-box; }
        
        .section { display: none; padding: 15px; box-sizing: border-box; width: 100%; }
        .section.active { display: block; }

        .dashboard { background: white; border-radius: 15px; padding: 15px; box-shadow: 0 4px 12px rgba(0,0,0,0.08); margin-bottom: 20px; border: 1px solid #eee; }
        
        /* [ìˆ˜ì •] íœ´ëŒ€í° í•œ í™”ë©´ì— ìµœëŒ€í•œ ë“¤ì–´ì˜¤ë„ë¡ ë„ˆë¹„ ì„¤ì • ìœ ì§€ ë° ìŠ¤í¬ë¡¤ ìµœì í™” */
        .timeline-scroll-area { 
            width: 100%; 
            overflow-x: auto; 
            border: 1px solid #eee; 
            border-radius: 8px;
            -webkit-overflow-scrolling: touch;
        }
        .timeline-container { 
            position: relative; 
            height: 600px; 
            min-width: 320px; /* ì•„ì´í° ë¯¸ë‹ˆ ë“± ì‘ì€ í°ì—ì„œë„ ì•ˆ ê¹¨ì§€ê²Œ ì¡°ì • */
            background: white; 
            overflow-y: auto;
        }

        .now-indicator { position: absolute; left: 0; right: 0; height: 2px; background: var(--now-line); z-index: 20; display: none; pointer-events: none; }

        .ev { 
            position: absolute; left: 4px; right: 4px; padding: 4px 6px; border-radius: 6px; 
            font-size: 11px; line-height: 1.2; box-shadow: 0 2px 4px rgba(0,0,0,0.04);
            display: flex; flex-direction: column; border-left: 3px solid rgba(0,0,0,0.1);
            z-index: 5;
            word-break: keep-all; 
            overflow: hidden;
        }
        .ev b { font-size: 10px; margin-bottom: 2px; display: block; color: inherit; }
        .ev span { font-size: 9px; font-weight: bold; opacity: 0.8; }

        .ev.half-left { right: 51% !important; }
        .ev.half-right { left: 51% !important; }

        /* ë‹¬ë ¥ ë¶€ë¶„ë„ í•œ í™”ë©´ì— ì˜ ë“¤ì–´ì˜¤ë„ë¡ ìˆ˜ì • */
        .calendar-wrapper { width: 100%; overflow-x: auto; border-radius: 8px; -webkit-overflow-scrolling: touch; }
        .grid-container { 
            display: grid; 
            grid-template-columns: repeat(7, 1fr); 
            background: #eee; 
            min-width: 600px; /* ë„ˆë¬´ ì¢ì•„ì§€ì§€ ì•Šê²Œ ìœ ì§€í•˜ë˜ ë‘ ì†ê°€ë½ í™•ëŒ€ë¥¼ ìœ„í•´ ì„¤ì • */
        }
        .day-header { background: #f8f9fa; padding: 10px; text-align: center; font-weight: bold; font-size: 11px; }
        .day-cell { background: white; height: 350px; position: relative; border-right: 1px solid #eee; border-bottom: 1px solid #eee; }
        .day-num { padding: 5px; font-weight: bold; font-size: 10px; }

        .math-br { background: var(--math-br); color: #0d47a1; }
        .math-ryu { background: var(--math-ryu); color: #00695c; }
        .math-dw { background: var(--math-dw); color: #4a148c; }
        .math-ws { background: var(--math-ws); color: #1a237e; }
        .phys-sol { background: var(--phys-sol); color: #e65100; }
        .phys-br { background: var(--phys-br); color: #b71c1c; }
        .algo-hc { background: var(--algo-hc); color: #1b5e20; }
        .algo-os { background: var(--algo-os); color: #33691e; }
        .hldy { background: var(--holiday); color: #854d0e; text-align: center; font-weight: bold; font-size: 10px; }

        .nav-grid { display: grid; grid-template-columns: 1fr 1fr; gap: 10px; }
        .menu-btn { background: white; border: 1px solid #ddd; padding: 20px; border-radius: 12px; font-weight: bold; cursor: pointer; font-size: 14px; }
        .back-btn { background: #444; color: white; border: none; padding: 10px 20px; border-radius: 8px; margin-bottom: 15px; cursor: pointer; }
    </style>
</head>
<body>

<header>2026 Winter Master</header>

<section id="home-section" class="section active">
    <div class="dashboard">
        <h2 id="todayDate" style="font-size:1.1rem; margin-top:0;">ì˜¤ëŠ˜ì˜ ì‹œê°„í‘œ</h2>
        <div class="timeline-scroll-area">
            <div class="timeline-container" id="todayTimeline">
                <div id="nowLineHome" class="now-indicator"></div>
            </div>
        </div>
    </div>
    <div class="nav-grid">
        <button class="menu-btn" onclick="openSchedule()">ğŸ—“ï¸ ì „ì²´ ë‹¬ë ¥</button>
        <button class="menu-btn" onclick="openTodo()">âœ… í•  ì¼</button>
    </div>
</section>

<section id="schedule-section" class="section">
    <button class="back-btn" onclick="goHome()">ğŸ  í™ˆìœ¼ë¡œ</button>
    <div style="display: flex; gap: 10px; margin-bottom: 10px; align-items: center;">
        <button onclick="renderCalendar(1)" style="padding:8px 15px;">1ì›”</button>
        <button onclick="renderCalendar(2)" style="padding:8px 15px;">2ì›”</button>
        <strong id="monthTitle" style="font-size: 1.1rem; margin-left: 10px;"></strong>
    </div>
    <div class="calendar-wrapper">
        <div class="grid-container" id="calendarGrid"></div>
    </div>
</section>

<section id="todo-section" class="section">
    <button class="back-btn" onclick="goHome()">ğŸ  í™ˆìœ¼ë¡œ</button>
    <div class="dashboard">
        <h2>ğŸ“‹ To-do List</h2>
        <div style="display:flex; gap:10px; margin-bottom:20px;">
            <input type="text" id="todoInput" style="flex:1; padding:12px; border:1px solid #ddd; border-radius:8px;" placeholder="í•  ì¼ì„ ì…ë ¥í•˜ì„¸ìš”">
            <button onclick="addTodo()" style="padding:0 20px; background:#222; color:white; border:none; border-radius:8px;">ì¶”ê°€</button>
        </div>
        <div id="todoList"></div>
    </div>
</section>

<script>
    // [ê¸°ì¡´ ë¡œì§ ë™ì¼]
    const baseSchedule = {
        1: [{n:'ë¬¼ë¦¬(ì†”ë£¨ì…˜)ì´ì •ìš±', s:'18:30', e:'21:30', h:18.5, dur:3, c:'phys-sol', p:'half-left'}, {n:'ë¬¼ë¦¬(ë¸Œë°¸)ì¥ì¬í•„', s:'19:20', e:'22:10', h:19.33, dur:2.8, c:'phys-br', p:'half-right'}],
        2: [{n:'í™•í†µ(ë¸Œë°¸)ì¥ì„¸ìš±T', s:'09:30', e:'12:30', h:9.5, dur:3, c:'math-br'}, {n:'í•œì»´ ì•Œê³ ë¦¬ì¦˜', s:'13:00', e:'14:50', h:13, dur:1.8, c:'algo-hc'}, {n:'í•œì»´ ì•Œê³ ë¦¬ì¦˜', s:'15:00', e:'16:50', h:15, dur:1.8, c:'algo-hc'}],
        3: [{n:'ë¬¼ë¦¬(ì†”ë£¨ì…˜)ì´ì •ìš±', s:'18:30', e:'21:30', h:18.5, dur:3, c:'phys-sol'}],
        4: [{n:'í™•í†µ(ë¸Œë°¸)ì¥ì„¸ìš±T', s:'09:30', e:'12:30', h:9.5, dur:3, c:'math-br'}, {n:'ë¯¸ì (ë¸Œë°¸)ë¥˜ìš°ì„±', s:'13:00', e:'16:00', h:13, dur:3, c:'math-ryu'}, {n:'ë¯¸ì (ì›ì†”)ê¹€ê¸°í˜„', s:'18:00', e:'22:00', h:18, dur:4, c:'math-ws'}],
        5: [{n:'ì›ì†” ì•Œê³ ë¦¬ì¦˜', s:'09:30', e:'13:30', h:9.5, dur:4, c:'algo-os'}, {n:'í•œì»´ ì•Œê³ ë¦¬ì¦˜', s:'15:00', e:'16:50', h:15, dur:1.8, c:'algo-hc'}, {n:'í•œì»´ ì•Œê³ ë¦¬ì¦˜', s:'17:00', e:'18:50', h:17, dur:1.8, c:'algo-hc'}],
        6: [{n:'í™•í†µ(ë‹¤ì›)ê¹€ì°¬ìš©', s:'09:30', e:'12:30', h:9.5, dur:3, c:'math-dw', p:'half-left'}, {n:'ë¯¸ì (ë¸Œë°¸)ë¥˜ìš°ì„±', s:'09:30', e:'12:30', h:9.5, dur:3, c:'math-ryu', p:'half-right'}, {n:'ë¬¼ë¦¬(ë¸Œë°¸)ì–‘ê¸°ì„ ', s:'16:00', e:'19:00', h:16, dur:3, c:'phys-br'}]
    };

    function formatTime12(hStr) {
        let [h, m] = hStr.split(':'); h = parseInt(h);
        const period = h >= 12 ? 'ì˜¤í›„' : 'ì˜¤ì „';
        const h12 = h > 12 ? h - 12 : (h === 0 ? 12 : h);
        return `${period} ${h12}:${m}`;
    }

    function getDaySchedule(m, d) {
        const dateObj = new Date(2026, m - 1, d);
        const day = dateObj.getDay();
        if (m === 2) {
            if (d === 12) {
                let s = baseSchedule[4].filter(ev => !ev.n.includes('ì¥ì„¸ìš±'));
                s.push({n:'í•™êµ ë“±êµ', s:'08:00', e:'15:30', h:8, dur:4.5, c:'hldy'});
                return s;
            }
            if (d === 16 || d === 18) return baseSchedule[day].filter(ev => ev.n.includes('ì´ì •ìš±'));
            if (d === 17) return [];
            if (d === 21) return baseSchedule[6].filter(ev => !ev.n.includes('ë¥˜ìš°ì„±'));
            if (d === 23) return baseSchedule[1].filter(ev => !ev.n.includes('ì¥ì¬í•„'));
            if (d === 28) return baseSchedule[6].filter(ev => !ev.n.includes('ë¥˜ìš°ì„±') && !ev.n.includes('ì–‘ê¸°ì„ '));
        }
        if (m === 3 && d <= 3) return [];
        return baseSchedule[day] || [];
    }

    window.onload = function() { updateHomeDashboard(); loadTodos(); setInterval(updateNowLine, 30000); };

    function updateHomeDashboard() {
        const now = new Date(); const m = now.getMonth() + 1; const d = now.getDate();
        document.getElementById('todayDate').innerText = now.toLocaleDateString('ko-KR', { month: 'long', day: 'numeric', weekday: 'short' }) + " ì¼ì •";
        const container = document.getElementById('todayTimeline');
        container.querySelectorAll('.ev').forEach(e => e.remove());
        const dailyData = getDaySchedule(m, d);
        dailyData.forEach(ev => {
            const top = (ev.h - 6) * 38 + 20; 
            const div = document.createElement('div');
            div.className = `ev ${ev.c} ${ev.p || ''}`;
            div.style = `top:${top}px; height:${ev.dur * 38}px;`;
            div.innerHTML = `<b>${ev.n}</b><span>${formatTime12(ev.s)}</span>`;
            container.appendChild(div);
        });
        updateNowLine();
    }

    function updateNowLine() {
        const now = new Date(); const h = now.getHours() + now.getMinutes() / 60;
        const line = document.getElementById('nowLineHome');
        if (h >= 6 && h <= 24) { line.style.top = (h - 6) * 38 + 20 + 'px'; line.style.display = 'block'; }
        else { line.style.display = 'none'; }
    }

    function renderCalendar(m) {
        const grid = document.getElementById('calendarGrid');
        document.getElementById('monthTitle').innerText = `${m}ì›”`;
        grid.innerHTML = '';
        ['ì¼','ì›”','í™”','ìˆ˜','ëª©','ê¸ˆ','í† '].forEach(d => grid.innerHTML += `<div class="day-header">${d}</div>`);
        const first = new Date(2026, m-1, 1).getDay();
        const last = new Date(2026, m, 0).getDate();
        for(let i=0; i<first; i++) grid.innerHTML += `<div class="day-cell"></div>`;
        for(let d=1; d<=last; d++) {
            let html = `<div class="day-num">${d}</div>`;
            const dailyData = getDaySchedule(m, d);
            dailyData.forEach(ev => {
                const top = (ev.h - 6) * 20 + 20;
                html += `<div class="ev ${ev.c} ${ev.p || ''}" style="top:${top}px; height:${ev.dur*20}px; font-size:9px; padding:2px;">
                            <b style="font-size:8px;">${ev.n}</b>
                         </div>`;
            });
            grid.innerHTML += `<div class="day-cell">${html}</div>`;
        }
    }

    function openSchedule() { document.querySelectorAll('.section').forEach(s => s.classList.remove('active')); document.getElementById('schedule-section').classList.add('active'); renderCalendar(1); }
    function openTodo() { document.querySelectorAll('.section').forEach(s => s.classList.remove('active')); document.getElementById('todo-section').classList.add('active'); }
    function goHome() { document.querySelectorAll('.section').forEach(s => s.classList.remove('active')); document.getElementById('home-section').classList.add('active'); updateHomeDashboard(); }

    function addTodo() {
        const input = document.getElementById('todoInput'); if(!input.value) return;
        const list = JSON.parse(localStorage.getItem('winter_v10') || '[]');
        list.push({ text: input.value, done: false });
        localStorage.setItem('winter_v10', JSON.stringify(list));
        input.value = ''; loadTodos();
    }
    function loadTodos() {
        const el = document.getElementById('todoList');
        const list = JSON.parse(localStorage.getItem('winter_v10') || '[]');
        el.innerHTML = list.length ? '' : '<p style="color:#999; text-align:center;">í•  ì¼ì´ ì—†ìŠµë‹ˆë‹¤.</p>';
        list.forEach((t, i) => {
            const div = document.createElement('div');
            div.style = "display:flex; align-items:center; padding:10px 0; border-bottom:1px solid #f0f0f0;";
            div.innerHTML = `<input type="checkbox" ${t.done?'checked':''} onchange="toggleTodo(${i})">
                <span style="flex:1; margin:0 10px; ${t.done?'text-decoration:line-through; color:#bbb;':''}">${t.text}</span>
                <button onclick="delTodo(${i})" style="color:red; border:none; background:none; cursor:pointer;">ì‚­ì œ</button>`;
            el.appendChild(div);
        });
    }
    function toggleTodo(i) { const list = JSON.parse(localStorage.getItem('winter_v10')); list[i].done = !list[i].done; localStorage.setItem('winter_v10', JSON.stringify(list)); loadTodos(); }
    function delTodo(i) { const list = JSON.parse(localStorage.getItem('winter_v10')); list.splice(i, 1); localStorage.setItem('winter_v10', JSON.stringify(list)); loadTodos(); }
</script>
</body>
</html>
